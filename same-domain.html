
<!DOCTYPE html>
<html>
<head>
  <title>xss-test (Same Domain)</title>
</head>
<body>
  <h1>xss-test (Same Domain) <script>document.write(location.hash)</script></h1>
  <hr/>
  <div>
    <code>&lt;input type="text" id="demo1" value="demo1"/&gt;</code>
  </div>
  <div>
    <input type="text" id="demo1" value="demo1" style="width:350px"/>
  </div>
  <hr/>
  <div>
    <code>&lt;input type="text" id="demo1" value="message"/&gt;</code>
  </div>
  <div>
    <input type="text" id="message" value="demo1" style="width:350px"/>
  </div>
  <hr/>
  <div>
    <br/>
    <a href="https://steven-chong-tec.github.io/xss-test/" target="_blank" onclick="document.getElementById('demo1').value='demo1'" style="color:blue">Open https://steven-chong-tec.github.io/xss-test/ by link</a>
  </div>
  <div>
    <br/>
    <a href="javascript:void(0)" onclick="document.getElementById('demo1').value='demo1';window.open('https://steven-chong-tec.github.io/xss-test/','_blank')" style="color:blue">Open https://steven-chong-tec.github.io/xss-test/ by JavaScript</a>
  </div>
<br/><hr/><br/>
<textarea id="log" style="width:98%;height:400px;"></textarea>
<script>
  window.addEventListener('message', function(evt) {
    document.getElementById('log').value += JSON.stringify(evt) + '\n';

    try {
      var data = JSON.parse(evt.data);
      if ('demo1' in data) {
        document.getElementById('demo1').value = data.demo1;
      }
    } catch (ex) {
      document.getElementById('log').value += String(ex) + '\n';
    }
  })
</script>
</body>
</html>
